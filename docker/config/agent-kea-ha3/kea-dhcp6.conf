{

"Dhcp6": {
    "interfaces-config": {
        "interfaces": [ "*" ]
    },
    "control-socket": {
        "socket-type": "unix",
        "socket-name": "/var/run/kea/kea6-ctrl-socket"
    },
    "lease-database": {
        "type": "memfile",
        "lfc-interval": 3600
    },
    "expired-leases-processing": {
        "reclaim-timer-wait-time": 10,
        "flush-reclaimed-timer-wait-time": 25,
        "hold-reclaimed-time": 3600,
        "max-reclaim-leases": 100,
        "max-reclaim-time": 250,
        "unwarned-reclaim-cycles": 5
    },
    "renew-timer": 900,
    "rebind-timer": 1800,
    "valid-lifetime": 3600,
    "hooks-libraries": [
        {
          "library": "libdhcp_lease_cmds.so"
        },
        {
          "library": "libdhcp_host_cmds.so"
        },
        {
          "library": "libdhcp_subnet_cmds.so"
        },
        {
          "library": "libdhcp_mysql.so"
        },
        {
            "library": "libdhcp_ha.so",
            "parameters": {
                "high-availability": [
                    {
                        "this-server-name": "server3",
                        "mode": "hot-standby",
                        "multi-threading": {
                            "enable-multi-threading": true,
                            "http-dedicated-listener": true,
                            "http-listener-threads": 4,
                            "http-client-threads": 4
                        },
                        "heartbeat-delay": 10000,
                        "max-response-delay": 20000,
                        "max-ack-delay": 5000,
                        "max-unacked-clients": 0,
                        "peers": [
                            {
                                "name": "server3",
                                "url": "http://172.24.0.121:8605",
                                "role": "primary",
                                "auto-failover": true
                            },
                            {
                                "name": "server4",
                                "url": "http://172.24.0.110:8606",
                                "role": "standby",
                                "auto-failover": true
                            }
                        ]
                    }
                ]
            }
        }
    ],

    "hosts-databases": [{
        "type": "mysql",
        "host": "mariadb",
        "name": "agent_kea_ha3",
        "user": "agent_kea_ha3",
        "password": "agent_kea_ha3"
    }],

    "client-classes": [
        {
            "name": "class-01-00-eth3-RELAY",
            "option-data": [ ],
            "test": "substring(option[1].hex,0,2) == 0x0100",
            "user-context": {
                "comment": "See explanation of class name format in tests/sim/traffic.py"
            }
        },
        {
            "name": "class-01-01-eth3-RELAY",
            "option-data": [ ],
            "test": "substring(option[1].hex,0,2) == 0x0101"
        },
        {
            "name": "class-01-02-eth3-RELAY",
            "option-data": [ ],
            "test": "substring(option[1].hex,0,2) == 0x0102"
        }

    ],

    "shared-networks": [
        {
            "name": "tokipona",
            "subnet6": [{
                "id": 123,
                "subnet": "51a4:14ec:1::/64",
                "pools": [ { "pool": "51a4:14ec:1::/80" } ],
                "client-classes": ["class-01-00-eth3-RELAY"],
                "relay": {
                    "ip-addresses": [ "3002:db8:1::10" ]
                },
                "user-context": {
                    "site": "tokipona",
                    "subnet-name": "ma-kanata"
                }
            },
            {
                "id": 124,
                "subnet": "51a4:14ec:2::/64",
                "pools": [ { "pool": "51a4:14ec:2::/80" } ],
                "client-classes": ["class-01-01-eth3-RELAY"],
                "relay": {
                    "ip-addresses": [ "3002:db8:1::10" ]
                },
                "user-context": {
                    "site": "tokipona",
                    "subnet-name": "ma-posuka"
                }
            }]
        }
    ],

    "subnet6": [
        {
            "id": 94,
            "subnet": "2601:beef:ca5e::/64",
            "pools": [ { "pool": "2601:beef:ca5e::/64" } ],
            "relay": {
                "ip-addresses": [ "3002:db8:1::10" ]
            },
            "client-classes": ["class-01-02-eth3-RELAY"],
            "user-context": {
                "ha-server-name": "server3"
            }
        }
    ],
    "loggers": [
      {
        "name": "kea-dhcp6",
        "output_options": [
            {
                "output": "stdout",
                "pattern": "%-5p %m\n"
            },
            {
                "output": "/var/log/kea/kea-dhcp6-ha3.log"
            }
        ],
        "severity": "INFO",
        "debuglevel": 0
    }
  ]
}
}
